# lab1实验报告

## 需要填充的代码及设计目标

./src/syscall/mod.rs::syscall

首先，由于时间非常重要，所以，需要立即运行get time函数得到当前时间，不然会有误差。

其次，每次进行系统调用，需要在task ctr block里面进行计数。

./src/syscall/mod.rs::process.rs

实现sys_task_info函数。

首先，需要找到当前的task ctr block，这根据内存中的分布即可得到。

其次，从task ctr block中得到进程运行状态，虽然因为运行到了，而且肯定是当前系统正在运行的进程，所以肯定是running状态。

第三，对于任务使用的系统调用，在对应的数组位置进行读取

第四，对于时间，实验说明中是这样说的：

- 运行时间 time 返回系统调用时刻距离任务第一次被调度时刻的时长，也就是说这个时长可能包含该任务被其他任务抢占后的等待重新调度的时间。

因此，需要获取任务第一次被调度时刻的时间。然后用获取的当前时间相减即可。

./src/task/mod.rs

首先，需要根据task.rs文件中的更改，进行一些数据结构的初始化。

其次，在manager里面，当某个任务第一次被调用的时候，记录下时间。并修改是否被初始化调度了

./src/tesk/task.rs

也就是按照上面的描述，在task ctr block中添加以下数据结构：

任务第一次被调度的时刻

任务使用的系统调用次数向量

是否已经调度过了

## 简答题